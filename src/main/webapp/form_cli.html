<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script src="js/jquery/jquery-2.1.4.js"></script>


<script>

function listar (data){						
	
	var linhas = "<table><tr> <th> Nome </th> <th> E-mail </th> </tr>";
	i=0;
    $.each(data, function(key, value){
    	linhas += "<tr><td>"+ value.nome +"</td>"+
    			       "<td>"+value.email+"</td>"+
    			       "<td><a href='javascript:excluir("+i+")'>excluir</a></td>"+
    			       
    			    "</tr>";
    			    
    	i++;
    });
    
    linhas += "</table>";
    $("#divClientes").html(linhas);
    
}
 
 
	
   function excluir (i){
    	if (window.confirm("Confirma exclus√£o?")){
	    	$.getJSON ('cli.do?i='+i,function(data){
	    		window.alert('Excluido com Sucesso!');
	    		listar(data);
	    	});
    	}
    }

$(document).ready( function ( ) {


    $.ajax({
        type: "GET",
        url: "estado.do",
        dataType: "json",
        success: function(json){
            var options = "<option value=''> Selecione </option>";
            $.each(json, function(key, value){
                options += '<option value="' + value.uf + '">' + value.nome + '</option>';
            });
            $("#estado").html(options);
        }
    });

        
       //CLICK NO SALVAR 
		$("#btnSalvar").click(function(){
			$.post("cli.do",
					{
						nome: $("#nome").val(),
						email: $("#email").val()
					},
					function(data){
						alert("Salvo com sucesso! ");
						listar(data);
					},'json');
		});
	 
	 //CLICK no Lista
	 $("#btnListar").click(function(){
    		$.getJSON("cli.do",	function (data){
    			
    				listar(data);
    	            
    		});
    		
    	});


});
</script>

</head>
<body>

<form id="frmcli">

	Nome: <input type="text" id="nome">
	E-mail: <input type="text" id="email">
	Estado : <select id="estado" name="estado"></select>
	<input type="button"  id="btnSalvar"  value="Salvar" />
	<input type="button"  id="btnListar"  value="Listar" />
	
</form>


<div id="divClientes">
	

</div>

</body>
</html>